@model qTech_custom_grid.ViewModels.CreateUserViewModel
@{
    var formData = ViewBag.FormData as qTech_custom_grid.ViewModels.UserFormDataViewModel;
}

<div class="modal fade" id="createUserModal" tabindex="-1" aria-labelledby="createUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createUserModalLabel">
                    <i class="fas fa-user-plus"></i> إضافة مستخدم جديد
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
            </div>
            
            <form id="createUserForm" method="post" action="/User/Create">
                @Html.AntiForgeryToken()
                
                
                <div class="modal-body">
                    <!-- Name Fields -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">الاسم الأول <span id="spnA_FirstName" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_FirstName" name="FirstName" type="text" class="form-control" maxlength="15" placeholder="أدخل الاسم الأول" />
                            <span id="spnE_FirstName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">اسم الأب <span id="spnA_FatherName" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_FatherName" name="FatherName" type="text" class="form-control" maxlength="15" placeholder="أدخل اسم الأب" />
                            <span id="spnE_FatherName" class="text-danger"></span>
                        </div>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">اسم الجد <span id="spnA_GrandFatherName" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_GrandFatherName" name="GrandFatherName" type="text" class="form-control" maxlength="15" placeholder="أدخل اسم الجد" />
                            <span id="spnE_GrandFatherName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">لقب العائلة <span id="spnA_FamilyName" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_FamilyName" name="FamilyName" type="text" class="form-control" maxlength="15" placeholder="أدخل لقب العائلة" />
                            <span id="spnE_FamilyName" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Personal Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">تاريخ الميلاد <span id="spnA_DateOfBirth" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_DateOfBirth" name="DateOfBirth" type="text" class="form-control" 
                                   placeholder="YYYY/MM/DD" 
                                   title="يجب أن يكون العمر بين 18 و 65 سنة" 
                                   onblur="convertDateBeforeValidation(this)"
                                   />
                            <span id="spnE_DateOfBirth" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">رقم الهوية <span id="spnA_IdentityNumber" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_IdentityNumber" name="IdentityNumber" type="text" class="form-control" maxlength="10" placeholder="أدخل رقم الهوية (10 أرقام)" />
                            <span id="spnE_IdentityNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">رقم الجوال <span id="spnA_MobileNumber" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_MobileNumber" name="MobileNumber" type="text" class="form-control" maxlength="12" placeholder="مثال: 966501234567" />
                            <span id="spnE_MobileNumber" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">البريد الإلكتروني <span id="spnA_Email" class="fa"></span></label>
                            <input id="txt_Email" name="Email" type="text" class="form-control" maxlength="50" placeholder="مثال: user@example.com" />
                            <span id="spnE_Email" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Gender and Nationality -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">الجنس <span id="spnA_Gender" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <div class="mt-2">
                                <div class="form-check form-check-inline">
                                    <input id="radio_Male" name="Gender" type="radio" value="1" class="form-check-input" checked />
                                    <label for="radio_Male" class="form-check-label">ذكر</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input id="radio_Female" name="Gender" type="radio" value="2" class="form-check-input" />
                                    <label for="radio_Female" class="form-check-label">أنثى</label>
                                </div>
                            </div>
                            <span id="spnE_Gender" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">الجنسية <span id="spnA_Nationality" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <select id="ddl_Nationality" name="Nationality" class="form-select">
                                <option value="">اختر الجنسية</option>
                                <option value="1">سعودي</option>
                                <option value="2">أجنبي</option>
                            </select>
                            <span id="spnE_Nationality" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Bank Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">رقم الحساب البنكي <span id="spnA_BankAccountNumber" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_BankAccountNumber" name="BankAccountNumber" type="text" class="form-control" maxlength="30" placeholder="أدخل رقم الحساب البنكي" />
                            <span id="spnE_BankAccountNumber" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">اسم البنك <span class="text-muted">(اختياري)</span></label>
                            <select id="ddl_BankId" name="BankId" class="form-select">
                                <option value="">اختر البنك</option>
                                @if (formData?.Banks != null)
                                {
                                    @foreach (var bank in formData.Banks)
                                    {
                                        <option value="@bank.Value">@bank.Text</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>

                    <!-- Additional Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">الحالة الاجتماعية <span class="text-muted">(اختياري)</span></label>
                            <select id="ddl_MaritalStatusId" name="MaritalStatusId" class="form-select">
                                <option value="">اختر الحالة الاجتماعية</option>
                                @if (formData?.MaritalStatuses != null)
                                {
                                    @foreach (var status in formData.MaritalStatuses)
                                    {
                                        <option value="@status.Value">@status.Text</option>
                                    }
                                }
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">المؤهل الدراسي <span class="text-muted">(اختياري)</span></label>
                            <input id="txt_EducationalQualification" name="EducationalQualification" type="text" class="form-control" maxlength="200" />
                        </div>
                    </div>

                    <!-- Employment Information -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">تاريخ التعيين <span id="spnA_DateOfAppointment" class="fa fa-asterisk" style="color: black;">*</span></label>
                            <input id="txt_DateOfAppointment" name="HiringDate" type="text" class="form-control" 
                                   placeholder="YYYY/MM/DD" 
                                   title="تاريخ التعيين لا يمكن أن يكون في المستقبل"
                                   onblur="convertDateBeforeValidation(this)"
                                    />
                            <span id="spnE_DateOfAppointment" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">رصيد الإجازات</label>
                            <div class="form-control-plaintext" id="lbl_LeaveBalance">0 يوم</div>
                            <small class="text-muted">يتم حساب الرصيد تلقائياً بمعدل 21 يوم لكل سنة</small>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-warning" id="btn_ClearValidation">
                        <i class="fas fa-eraser"></i> مسح التحقق
                    </button>
                    <button type="button" class="btn btn-info" id="btn_ResetForm">
                        <i class="fas fa-redo"></i> إعادة تعيين
                    </button>
                    <button type="button" class="btn btn-success" id="btn_SaveUser">
                        <i class="fas fa-save"></i> حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
    // Show the modal
    $('#createUserModal').modal('show');
});
</script>
